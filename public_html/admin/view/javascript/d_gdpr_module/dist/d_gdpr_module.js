"use strict";var d_gdpr_module={initState:function(t){this.state=$.extend({},this.state,t)},state:{},actions:{},mutations:{},getters:{}};d_gdpr_module.actions.UPDATE_SECTION=function(o,i){o.commit("UPDATE_SECTION_PENDING"),o.commit("LOADING_START"),$.post(o.state.config.update_section_url,{setting:JSON.stringify(_.extend({},o.rootState.sections[i.type])),type:i.type},function(t,e){"success"===e&&(o.commit("UPDATE_SECTION_SUCCESS",{type:i.type,setting:t.setting}),i.notification&&alertify.success(t.success),i.redirect&&(window.location.href=t.redirect_url)),"error"===e&&alertify.error(t.error),o.commit("LOADING_FINISH")},"json").fail(function(t,e,o){alertify.error("ERROR")})},d_gdpr_module.actions.SETUP_MODULE=function(o,i){o.commit("LOADING_START"),$.post(o.state.config.setup_url,{},function(t,e){"success"===e&&(o.commit("UPDATE_SECTION_SUCCESS",{type:"setting",setting:t.setting}),alertify.success(t.success)),!_.isUndefined(i.callback)&&_.isFunction(i.callback)&&i.callback(),"error"==e&&alertify.error(t.error),o.commit("LOADING_FINISH")},"json")},d_gdpr_module.actions.COOKIES_CHANGE_PAGE=function(t,e){t.commit("COOKIES_CHANGE_PAGE",e)},d_gdpr_module.actions.POLICIES_CHANGE_PAGE=function(t,e){t.commit("POLICIES_CHANGE_PAGE",e)},d_gdpr_module.actions.REQUESTS_CHANGE_PAGE=function(t,e){t.commit("REQUESTS_CHANGE_PAGE",e)},d_gdpr_module.actions.UPDATE_SETTING=function(t,e){t.commit("UPDATE_SETTING",e)},d_gdpr_module.actions.PERFORM_TODO=function(t,e){t.commit("PERFORM_TODO",e)},d_gdpr_module.actions.CANCEL_TODO=function(t,e){t.commit("CANCEL_TODO",e)},d_gdpr_module.getters.setting_loading=function(t){return t.common.loading},d_gdpr_module.getters.cookies_entities=function(t,e){var o={};return _.isUndefined(t.sections.cookies.jobs[e.cookies_page])||(o=t.sections.cookies.jobs[e.cookies_page]),o},d_gdpr_module.getters.cookies_available_pages=function(t){return _.keys(t.sections.cookies.jobs).map(Number)},d_gdpr_module.getters.cookies_page=function(t){return t.sections.cookies.current_page},d_gdpr_module.getters.cookies_total=function(t){return t.sections.cookies.total},d_gdpr_module.getters.cookies_limit=function(t){return t.sections.cookies.limit},d_gdpr_module.getters.policies_entities=function(t,e){var o={};return _.isUndefined(t.sections.policies.jobs[e.policies_page])||(o=t.sections.policies.jobs[e.policies_page]),o},d_gdpr_module.getters.policies_available_pages=function(t){return _.keys(t.sections.policies.jobs).map(Number)},d_gdpr_module.getters.policies_page=function(t){return t.sections.policies.current_page},d_gdpr_module.getters.policies_total=function(t){return t.sections.policies.total},d_gdpr_module.getters.policies_limit=function(t){return t.sections.policies.limit},d_gdpr_module.getters.requests_entities=function(t,e){var o={};return _.isUndefined(t.sections.requests.jobs[e.requests_page])||(o=t.sections.requests.jobs[e.requests_page]),o},d_gdpr_module.getters.requests_available_pages=function(t){return _.keys(t.sections.requests.jobs).map(Number)},d_gdpr_module.getters.requests_page=function(t){return t.sections.requests.current_page},d_gdpr_module.getters.requests_total=function(t){return t.sections.requests.total},d_gdpr_module.getters.requests_limit=function(t){return t.sections.requests.limit},d_gdpr_module.getters.setting=function(t){return t.sections.setting.setting},d_gdpr_module.getters.setup_status=function(t){return t.sections.setting.setting.install},d_gdpr_module.getters.todo=function(t){return t.sections.todo.jobs},Vue.component("gdpr-breadcrumbs",{template:"#tag-gdpr-breadcrumbs"}),Vue.component("gdpr-navigation",{template:"#tag-gdpr-navigation"}),Vue.component("gdpr-navigation",{template:"#tag-gdpr-navigation"}),Vue.component("gdpr-pagination",{template:"#tag-gdpr-pagination",props:{total:{type:Number,default:function(){return 0}},page:{type:Number,default:function(){return 0}},limit:{type:Number,default:function(){return 0}}},computed:{totalPages:function(){var t=this.total/this.limit;return Math.floor(t)+(0<t%1?1:0)},pages:function(){var t=_.range(1,this.totalPages+1);return t=_.map(t,function(t){return{number:t,active:t===this.page}}.bind(this)),t},currentStart:function(){return 0<this.total?(this.page-1)*this.limit+1:0},currentEnd:function(){return 1<this.totalPages&&this.page!==this.totalPages?this.page*this.limit:this.total}},methods:{clickPage:function(t){this.$emit("change",t)}}}),Vue.component("gdpr-welcome",{template:"#tag-gdpr-welcome",methods:{setup:function(){this.$store.dispatch("SETUP_MODULE",{callback:function(){this.$router.push("/gdpr")}.bind(this)})}}}),Vue.component("gdpr-module",{template:"#tag-gdpr-module",computed:{loading:function(){return this.$store.getters.setting_loading},setup:function(){return this.$store.getters.setup_status}},methods:{saveAndStay:function(){this.$store.dispatch("UPDATE_SECTION",{type:"setting",notification:!0})},save:function(){this.$store.dispatch("UPDATE_SECTION",{type:"setting",notification:!0,redirect:!0})}}}),Vue.component("gdpr-color-picker",{template:"#tag-gdpr-color-picker",props:{name:{type:String,default:function(){return""}},value:{type:String,default:function(){return""}}},mounted:function(){$(this.$vnode.elm).ColorPickerSliders({size:"sm",placement:"bottom",swatches:!1,sliders:!1,hsvpanel:!0,previewformat:"hex",updateinterval:"15",connectedinput:$(this.$vnode.elm),onchange:function(){$(this.$vnode.elm).trigger("input",{target:this.$vnode.elm}),this.$emit("change",{target:this.$vnode.elm})}.bind(this)})},computed:{}}),Vue.component("gdpr-label",{template:"#tag-gdpr-label",props:{code:{type:String,default:function(){return""}}},mounted:function(){$(this.$vnode.elm).find("[data-toggle='tooltip']").tooltip({container:"body",html:!0})}}),Vue.component("gdpr-modal",{template:"#tag-gdpr-modal",props:{title:{type:String,default:function(){return""}},content:{type:String,default:function(){return""}}},mounted:function(){$(this.$vnode.elm).modal("show"),$(this.$vnode.elm).on("hidden.bs.modal",function(){this.$emit("close")}.bind(this))}}),Vue.component("gdpr-powered",{template:"#tag-gdpr-powered"}),Vue.component("gdpr-select",{template:"#tag-gdpr-select",props:{name:{type:String,default:function(){return""}},value:{type:String,default:function(){return""}},options:{type:Object,default:function(){return{}}},none:{type:Boolean,default:function(){return!1}}},computed:{},methods:{handleChange:function(t){this.$emit("change",t),$(this.$vnode.elm).trigger("input",t)}}}),Vue.component("gdpr-support",{template:"#tag-gdpr-support"}),Vue.component("gdpr-switcher",{template:"#tag-gdpr-switcher",props:{name:{type:String,default:function(){return""}},value:{type:Number,default:function(){return 0}}},mounted:function(){$(this.$vnode.elm).bootstrapSwitch({onColor:"success",onText:this.$t("common.text_yes"),offText:this.$t("common.text_no")}),$(this.$vnode.elm).on("switchChange.bootstrapSwitch",function(t,e){$(this.$vnode.elm).trigger("input",{target:{name:this.name,value:e?1:0}}),this.$emit("change",{target:{name:this.name,value:e?1:0}})}.bind(this))}}),Vue.component("gdpr-section-cookies",{template:"#tag-gdpr-section-cookies",computed:{cookies:function(){return this.$store.getters.cookies_entities},total:function(){return this.$store.getters.cookies_total},limit:function(){return this.$store.getters.cookies_limit},page:function(){return this.$store.getters.cookies_page}},methods:{changePage:function(t){this.$store.dispatch("COOKIES_CHANGE_PAGE",{page:t}),_.contains(this.$store.getters.cookies_available_pages,t)||this.$store.dispatch("UPDATE_SECTION",{type:"cookies"})}}}),Vue.component("gdpr-section-notification",{template:"#tag-gdpr-section-notification"}),Vue.component("gdpr-section-policies",{template:"#tag-gdpr-section-policies",data:function(){return{modal_status:!1,policy_id:""}},computed:{policies:function(){return this.$store.getters.policies_entities},activePolicy:function(){return _.find(this.$store.getters.policies_entities,{id:this.policy_id})},total:function(){return this.$store.getters.policies_total},limit:function(){return this.$store.getters.policies_limit},page:function(){return this.$store.getters.policies_page}},methods:{showPolicy:function(t){this.policy_id=t,this.modal_status=!0},closeModal:function(){this.modal_status=!1},changePage:function(t){this.$store.dispatch("POLICIES_CHANGE_PAGE",{page:t}),_.contains(this.$store.getters.policies_available_pages,t)||this.$store.dispatch("UPDATE_SECTION",{type:"policies"})}}}),Vue.component("gdpr-section-requests",{template:"#tag-gdpr-section-requests",computed:{requests:function(){return this.$store.getters.requests_entities},total:function(){return this.$store.getters.requests_total},limit:function(){return this.$store.getters.requests_limit},page:function(){return this.$store.getters.requests_page}},methods:{changePage:function(t){this.$store.dispatch("REQUESTS_CHANGE_PAGE",{page:t}),_.contains(this.$store.getters.requests_available_pages,t)||this.$store.dispatch("UPDATE_SECTION",{type:"requests"})}}}),Vue.component("gdpr-section-setting",{template:"#tag-gdpr-section-setting",computed:{setting:function(){return this.$store.getters.setting}},mounted:function(){$("#translate-setting > li:first",this.$el).addClass("active"),$("#translate-setting",this.$el).next().find(".tab-pane:first").addClass("active")},methods:{update:function(t,e){var o=$.extend(!0,{},this.setting,e.data.setting);this.$store.dispatch("UPDATE_SETTING",{setting:o})}}}),Vue.component("gdpr-section-tables",{template:"#tag-gdpr-section-tables"}),Vue.component("gdpr-section-todo",{template:"#tag-gdpr-section-todo",computed:{todos:function(){return this.$store.getters.todo}},methods:{clickTodo:function(t,e){e?this.$store.dispatch("CANCEL_TODO",{number:t}):this.$store.dispatch("PERFORM_TODO",{number:t}),this.$store.dispatch("UPDATE_SECTION",{type:"todo"})}}}),d_gdpr_module.state.common={loading:!1},d_gdpr_module.mutations.LOADING_START=function(t){Vue.set(t.common,"loading",!0)},d_gdpr_module.mutations.LOADING_FINISH=function(t){Vue.set(t.common,"loading",!1)},d_gdpr_module.mutations.UPDATE_SECTION_SUCCESS=function(t,e){Vue.set(t.sections,[e.type],e.setting)},d_gdpr_module.mutations.COOKIES_CHANGE_PAGE=function(t,e){Vue.set(t.sections.cookies,"current_page",e.page)},d_gdpr_module.mutations.POLICIES_CHANGE_PAGE=function(t,e){Vue.set(t.sections.policies,"current_page",e.page)},d_gdpr_module.mutations.REQUESTS_CHANGE_PAGE=function(t,e){Vue.set(t.sections.requests,"current_page",e.page)},d_gdpr_module.mutations.UPDATE_SETTING=function(t,e){Vue.set(t.sections.setting,"setting",e.setting)},d_gdpr_module.mutations.PERFORM_TODO=function(t,e){Vue.set(t.sections.todo.jobs[e.number],"active",!0)},d_gdpr_module.mutations.CANCEL_TODO=function(t,e){Vue.set(t.sections.todo.jobs[e.number],"active",!1)};